<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Mood Based Music Recommender</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">
    <div class="container py-6 text-center">
        <h1 class="mb-4">ðŸŽ§ Mood Based Music Recommender</h1>

        <!-- Mood Selection Form -->
        <form id="moodForm" class="d-flex justify-content-center">
            <select name="mood" id="mood" class="form-select w-25">
                <option value="happy">ðŸ˜Š Happy</option>
                <option value="sad">ðŸ˜¢ Sad</option>
                <option value="energetic">âš¡ Energetic</option>
                <option value="calm">ðŸŒ™ Calm</option>
            </select>
            <button class="btn btn-success ms-3" type="submit">Recommend</button>
        </form>

        <!-- Result Area -->
        <div id="results" class="mt-4"></div>

        <!-- Footer -->
        <footer class="mt-5 pt-4 border-top">
            <h5 class="text-muted">Project Guide: Prof. P. B. Patil</h5>
            <p class="text-muted">Made by Apurv M.</p>
        </footer>
    </div>

    <!-- JS for AJAX Request -->
    <script>
        document.getElementById("moodForm").addEventListener("submit", async function(e) {
            e.preventDefault();
            const mood = document.getElementById("mood").value;
        
            const response = await fetch("/recommend", {
                method: "POST",
                headers: {
                    "Content-Type": "application/x-www-form-urlencoded"
                },
                body: `mood=${encodeURIComponent(mood)}`
            });
        
            const songs = await response.json();
            const resultsDiv = document.getElementById("results");
        
            if (songs.length === 0) {
                resultsDiv.innerHTML = "<p>No songs found for this mood.</p>";
            } else {
                resultsDiv.innerHTML = `
                    <h3>ðŸŽ¶ Recommended Songs:</h3>
                    <ul class="list-group mt-3">
                        ${songs.map(song => {
                            const query = encodeURIComponent(song);
                            return `
                                <li class="list-group-item d-flex justify-content-between align-items-center">
                                    ${song}
                                    <a href="https://www.youtube.com/results?search_query=${query}" target="_blank" class="btn btn-danger btn-sm">Search on YouTube</a>
                                </li>
                            `;
                        }).join('')}
                    </ul>
                `;
            }
        });
        </script>        
</body>
</html>
